<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Paging Problem Solver</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Fira+Code:wght@500&display=swap');

        :root {
            --bg-color: #0f172a;
            --panel-bg: #1e293b;
            --accent-log: #3b82f6;   /* Blue - Logical */
            --accent-phy: #22c55e;   /* Green - Physical */
            --accent-page: #fbbf24;  /* Yellow - Page Size */
            --accent-table: #c084fc; /* Purple - Page Table */
            --text-main: #f8fafc;
            --text-muted: #94a3b8;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Inter', sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin: 0;
            min-height: 100vh;
        }

        h1 { margin-bottom: 5px; color: #fff; }
        p { color: var(--text-muted); margin-bottom: 30px; font-size: 0.9rem; }

        /* --- MAIN CONTAINER --- */
        .solver-container {
            width: 900px;
            background: var(--panel-bg);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 20px 50px -10px rgba(0,0,0,0.5);
            display: flex;
            gap: 40px;
            min-height: 550px;
        }

        /* --- LEFT: VISUAL STAGE --- */
        .visual-stage {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-right: 1px solid rgba(255,255,255,0.1);
            padding-right: 40px;
            position: relative;
        }

        .mem-block {
            width: 150px;
            background: rgba(255,255,255,0.05);
            border: 2px solid rgba(255,255,255,0.2);
            border-radius: 12px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            opacity: 0.2;
            transform: scale(0.8);
            margin-bottom: 20px;
            height: 180px;
        }

        .mem-block.active {
            opacity: 1;
            transform: scale(1);
            box-shadow: 0 0 40px rgba(0,0,0,0.4);
        }

        /* Block Variants */
        .blk-log.active { border-color: var(--accent-log); background: rgba(59, 130, 246, 0.1); }
        .blk-phy.active { border-color: var(--accent-phy); background: rgba(34, 197, 94, 0.1); }
        .blk-table.active { border-color: var(--accent-table); background: rgba(192, 132, 252, 0.1); }

        /* Labels inside blocks */
        .block-label { font-size: 0.75rem; text-transform: uppercase; color: #ccc; margin-bottom: 5px; }
        .block-val { font-family: 'Fira Code', monospace; font-size: 1.4rem; font-weight: bold; color: #fff; }
        .block-bin { font-family: 'Fira Code', monospace; font-size: 0.9rem; margin-top: 5px; opacity: 0; transition: 0.5s; }
        .active .block-bin { opacity: 1; color: var(--accent-page); }

        /* Cutting Lines Animation */
        .cuts {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: flex; flex-direction: column; justify-content: space-evenly;
            opacity: 0; transition: opacity 0.5s;
        }
        .show-cuts .cuts { opacity: 1; }
        .cut-line { width: 100%; height: 1px; background: var(--accent-page); box-shadow: 0 0 5px var(--accent-page); }

        /* --- RIGHT: CALCULATION PANEL --- */
        .calc-stage {
            flex: 1.3;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .step-panel {
            display: none;
            animation: slideIn 0.5s ease-out;
        }
        .step-panel.visible { display: block; }

        .step-title { font-size: 1.2rem; font-weight: 600; color: #fff; margin-bottom: 15px; border-bottom: 1px solid #333; padding-bottom: 10px; }

        .math-row {
            font-family: 'Fira Code', monospace;
            font-size: 1.3rem;
            margin: 20px 0;
            display: flex;
            align-items: center;
            gap: 15px;
            color: var(--text-muted);
        }

        .fraction { display: flex; flex-direction: column; align-items: center; text-align: center; }
        .num { border-bottom: 2px solid #fff; padding-bottom: 4px; color: #fff; }
        .den { padding-top: 4px; color: var(--accent-page); }

        .result-box {
            padding: 8px 16px; border-radius: 6px; border: 1px solid rgba(255,255,255,0.2);
            color: #fff; font-weight: bold; background: rgba(255,255,255,0.05);
        }

        .expl-box {
            background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; font-size: 0.9rem; line-height: 1.5; color: #ccc;
        }
        .expl-box b { color: #fff; }

        /* --- CONTROLS --- */
        .controls { margin-top: 30px; display: flex; gap: 15px; }
        button { padding: 12px 24px; border-radius: 8px; font-weight: 600; cursor: pointer; border:none; transition:0.2s; }
        #btn-next { background: var(--accent-log); color: #fff; }
        #btn-next:hover { transform: translateY(-2px); filter: brightness(1.1); }
        #btn-next:disabled { background: #334155; color: #64748b; cursor: not-allowed; transform: none; }
        .btn-reset { background: transparent; border: 1px solid #475569; color: #94a3b8; }
        .btn-reset:hover { border-color: #fff; color: #fff; }

        @keyframes slideIn { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }

    </style>
</head>
<body>

    <h1>Paging Problem Solver</h1>
    <p>Given: Logical=4GB, Physical=64MB, Page=4KB</p>

    <div class="solver-container">
        
        <div class="visual-stage">
            <div class="mem-block blk-log" id="block-log">
                <div class="block-label">Logical Memory</div>
                <div class="block-val">4 GB</div>
                <div class="block-bin">2<sup>32</sup> Bytes</div>
                <div class="cuts">
                    <div class="cut-line"></div><div class="cut-line"></div><div class="cut-line"></div><div class="cut-line"></div>
                </div>
            </div>

            <div class="mem-block blk-phy" id="block-phy">
                <div class="block-label">Physical Memory</div>
                <div class="block-val">64 MB</div>
                <div class="block-bin">2<sup>26</sup> Bytes</div>
                <div class="cuts">
                    <div class="cut-line"></div><div class="cut-line"></div>
                </div>
            </div>

            <div class="mem-block blk-table" id="block-table" style="display:none; height: 120px;">
                <div class="block-label">Page Table</div>
                <div class="block-val" id="table-val">?</div>
            </div>
        </div>

        <div class="calc-stage">
            
            <div class="step-panel visible" id="step-0">
                <div class="step-title">Problem Analysis</div>
                <div class="expl-box">
                    To solve this mentally, we first convert everything to <b>Powers of 2</b>.<br><br>
                    1. <b>Logical Memory (4 GB)</b>:<br>
                       4 × 2<sup>30</sup> = 2<sup>2</sup> × 2<sup>30</sup> = <b style="color:var(--accent-log)">2<sup>32</sup></b><br><br>
                    2. <b>Physical Memory (64 MB)</b>:<br>
                       64 × 2<sup>20</sup> = 2<sup>6</sup> × 2<sup>20</sup> = <b style="color:var(--accent-phy)">2<sup>26</sup></b><br><br>
                    3. <b>Page Size (4 KB)</b>:<br>
                       4 × 2<sup>10</sup> = 2<sup>2</sup> × 2<sup>10</sup> = <b style="color:var(--accent-page)">2<sup>12</sup></b>
                </div>
            </div>

            <div class="step-panel" id="step-1">
                <div class="step-title">1. Find Number of Pages</div>
                <div class="math-row">
                    <div class="fraction">
                        <span class="num" style="color:var(--accent-log)">Logical (2<sup>32</sup>)</span>
                        <span class="den" style="color:var(--accent-page)">Page Size (2<sup>12</sup>)</span>
                    </div>
                    <span>=</span>
                    <span>2<sup>(32-12)</sup></span>
                    <span>=</span>
                    <div class="result-box" style="border-color:var(--accent-log)">2<sup>20</sup> Pages</div>
                </div>
                <div class="expl-box">
                    We divide Logical Memory by Page Size.<br>
                    Simply subtract the exponents: 32 - 12 = <b>20</b>.<br>
                    (Note: 2<sup>20</sup> = 1 Million Pages)
                </div>
            </div>

            <div class="step-panel" id="step-2">
                <div class="step-title">2. Find Number of Frames</div>
                <div class="math-row">
                    <div class="fraction">
                        <span class="num" style="color:var(--accent-phy)">Physical (2<sup>26</sup>)</span>
                        <span class="den" style="color:var(--accent-page)">Frame Size (2<sup>12</sup>)</span>
                    </div>
                    <span>=</span>
                    <span>2<sup>(26-12)</sup></span>
                    <span>=</span>
                    <div class="result-box" style="border-color:var(--accent-phy)">2<sup>14</sup> Frames</div>
                </div>
                <div class="expl-box">
                    We divide Physical Memory by Frame Size.<br>
                    Subtract exponents: 26 - 12 = <b>14</b>.<br>
                    (Note: 2<sup>14</sup> = 16,384 Frames)
                </div>
            </div>

            <div class="step-panel" id="step-3">
                <div class="step-title">3. Find Page Table Entries</div>
                <div class="math-row">
                    <span>Entries</span>
                    <span>=</span>
                    <span>No. of Pages</span>
                    <span>=</span>
                    <div class="result-box" style="border-color:var(--accent-table)">2<sup>20</sup> Entries</div>
                </div>
                <div class="expl-box">
                    The Page Table needs one entry (row) for every Page in the logical memory.<br>
                    So, we need <b>1 Million</b> entries.
                </div>
            </div>

            <div class="step-panel" id="step-4">
                <div class="step-title">4. Find Page Table Size</div>
                <div class="expl-box" style="margin-bottom:10px;">
                    First, find the <b>Entry Size</b>: <br>
                    We need to address <b>2<sup>14</sup> Frames</b>. This requires <b>14 bits</b>.<br>
                    We round 14 bits up to the nearest Byte alignment: <b>2 Bytes</b> (16 bits).
                </div>
                <div class="math-row">
                    <span>Size</span>
                    <span>=</span>
                    <span>2<sup>20</sup> Entries</span>
                    <span>×</span>
                    <span>2 Bytes</span>
                </div>
                <div class="math-row">
                    <span>=</span>
                    <div class="result-box" style="border-color:var(--accent-table)">2 MB</div>
                </div>
            </div>

            <div class="step-panel" id="step-5">
                <div class="step-title">Final Answers</div>
                <div class="expl-box" style="font-size: 1.1rem; line-height: 2;">
                    1. Number of Pages: <b style="color:var(--accent-log)">2<sup>20</sup></b><br>
                    2. Number of Frames: <b style="color:var(--accent-phy)">2<sup>14</sup></b><br>
                    3. Page Table Entries: <b style="color:var(--accent-table)">2<sup>20</sup></b><br>
                    4. Page Table Size: <b style="color:#fff">2 MB</b>
                </div>
            </div>

        </div>

    </div>

    <div class="controls">
        <button onclick="nextStep()" id="btn-next">Start Solution</button>
        <button onclick="resetSim()" class="btn-reset">Reset</button>
    </div>

    <script>
        let step = 0;

        function updateView() {
            // Hide all panels
            document.querySelectorAll('.step-panel').forEach(el => el.classList.remove('visible'));
            document.getElementById(`step-${step}`).classList.add('visible');

            const logBlk = document.getElementById('block-log');
            const phyBlk = document.getElementById('block-phy');
            const tblBlk = document.getElementById('block-table');
            const btn = document.getElementById('btn-next');

            // Reset Blocks
            logBlk.className = 'mem-block blk-log';
            phyBlk.className = 'mem-block blk-phy';
            tblBlk.className = 'mem-block blk-table';
            logBlk.classList.remove('show-cuts');
            phyBlk.classList.remove('show-cuts');
            tblBlk.style.display = 'none';

            // Button Text Update
            const btnLabels = ["Calculate Pages", "Calculate Frames", "Find Entries", "Find Table Size", "Show Summary", "Finished"];
            if (step < 5) btn.innerText = btnLabels[step];
            else { btn.innerText = "Finished"; btn.disabled = true; }

            // Animations per Step
            if(step === 0) { // Start
                logBlk.classList.add('active');
                phyBlk.classList.add('active');
            }
            else if(step === 1) { // Pages
                logBlk.classList.add('active', 'show-cuts');
                phyBlk.style.opacity = '0.2'; // Dim physical
            }
            else if(step === 2) { // Frames
                logBlk.style.opacity = '0.2';
                phyBlk.classList.add('active', 'show-cuts');
            }
            else if(step === 3) { // Entries
                logBlk.classList.add('active'); // Highlight Logic again (source of entries)
                phyBlk.style.opacity = '0.2';
                tblBlk.style.display = 'flex';
                setTimeout(() => tblBlk.classList.add('active'), 50);
                document.getElementById('table-val').innerText = "?";
            }
            else if(step === 4) { // Size
                tblBlk.style.display = 'flex';
                tblBlk.classList.add('active');
                document.getElementById('table-val').innerText = "2 MB";
                logBlk.style.opacity = '0.2';
                phyBlk.style.opacity = '0.2';
            }
            else if(step === 5) { // Summary
                logBlk.classList.add('active');
                phyBlk.classList.add('active');
                tblBlk.style.display = 'flex';
                tblBlk.classList.add('active');
            }
        }

        function nextStep() {
            step++;
            updateView();
        }

        function resetSim() {
            step = 0;
            document.getElementById('btn-next').disabled = false;
            updateView();
        }

        // Init
        setTimeout(() => {
            document.getElementById('block-log').classList.add('active');
            document.getElementById('block-phy').classList.add('active');
        }, 100);

    </script>
</body>
</html>